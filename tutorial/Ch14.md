# 14-1. Intro to DB

## Database Management Systems
A Database Management System, or **DBMS** is a software that manages large collections of data  

### Popular DBMS Softwares
- MySQL
- Oracle
- MS SQL
- Postgres SQL
- SQLite

## History
File systems were orginally used to store and retrieve data  

But as the size of the data grew larger, simple operations like searching, inserting and deleting became cumbersome  

Hence, there was a need for DBMS which could store and manipulate large amounts of data in an organized and efficient manner

## SQL
- Structured Query Language **(SQL)** is a standard language for working with the DBMS
- Originally developed by IBM in 1970
- SQL consists of several keywords that you use to construct statements
- SQL statements are submitted to the DBMS, which are instructions to carry out operations on the data
- Python programs must construct these statments as strings and use a library method to pass these strings to the DBMS
  


## SQLite
- For this class we use SQLite
- It is easy to use
- Already comes installed with Python
- To use it just include the line of code `import sqlite3`


# 14-2. Tables, Rows and Columns

The data that is stored in a database is organized into one or more **tables**  
Each table holds a collection of relational data  
The data that is stored in a table is organized in rows and columns  

A **row** is a complete set of data about a single item, the data stored in a row is divided into columns  

Each **column** holds a sinlge piece of data about an item

|Name   	| Major  	| GPA  |  CWID  |
|----------------	|--------------	|---------------	| ----------- |
|John Smith   | HIST 	  |  2.45 	| 30010100 |
|  Jane Doe 	|  HIST 	|   	| 30010101 |
|  Mia Rose 	|  CINS 	|  3.27 	| 30010102 |
|  John Smith | COSC    |  3.42   | 30010103 |


## a. Column Data Types
When you create a database table, you must specify a data type for the columns
- These are NOT Python data types
- The data types are provided by the SQLite database
- Here is a table that lists the SQLite data types and the corresponding compatible Python data type

|SQLite Data Type   	| Description  	| Python Data type  |
|--------------------	|--------------	|------------------	|
|NULL   	| Unknown value  	|  None 	|
|  INTEGER 	|  Integer Number 	|   int	|
|  REAL 	|  Real Number 	|  float 	|
|  TEXT 	|  String 	|  str 	|
|  BLOB 	|  Binary Large Object 	|  Can be any object 	|

**NULL** can be used when the value is unknown or missing. When Python reads a NULL value into memory, the value is converted into None  

**INTEGER** holds a signed integer value (positive and negative numbers). When Python reads an INTEGER value into memory, the value is converted into int  

**REAL** holds a real number (with decimal places). When Python reads a REAL value into memory, the value is converted into float  

**TEXT** holds a string. When Python reads a TEXT value into memory, the value is converted into str  

**BLOB** holds an object of any type (for example, image or audio file). When Python reads a BLOB value into memory, the value is converted into a bytes object, which is an immutable sequence of bytes


# 14-3. Primary Keys, Identity Columns, NULL

## a. Primary Keys

**Primary Key** is a column that can be used to identify a specific row. Primary keys must hold unique values  
e.g. SSN for people etc or CWID for ULM students

Primary keys MUST contain a value  

You can create a table without a primary key, but best practice is to always have a primary key  

Primary keys can be used to establish relationships between tables

|Name   	| Major  	| GPA  |  CWID  |
|----------------	|--------------	|---------------	| ----------- |
|John Smith   | HIST 	  |  2.45 	| 30010100 |
|  Jane Doe 	|  HIST 	|   	| 30010101 |
|  Mia Rose 	|  CINS 	|  3.27 	| 30010102 |
|  John Smith | COSC    |  3.42   | 30010103 |

## b. Identity Columns
Sometimes data may not contain a primary key, which uniquely identifies a row  
An identity column is a column that contains unique values that are generated by the DBMS  
Identity columns usually contain integers that are *autoincremented*  
e.g. Order number of Amazon order  
Confirmation number for airline ticket

## c. Allowing Null values
If a column contains no data, it is said to be null. It is okay for a column to be left empty. For example, if you are a freshman, you will not have a GPA yet, until after the semester ends  

Some columns such as 

When you design a table, you can apply a *constraint* or rule that prevents a column from being null. Failing to provide data for that column will result in an error  

### We will learn how to design tables using SQL statements that can have
- columns with different datatypes
- primary keys that can be auto incremented
- columns that MUST have data (like name, gender etc.)


# 14-4. SQLlite 3 Module in Python

Python application cannot directly "talk to" the SQLite DBMS    

So we import a module called sqlite3 that acts like a translator  

It relays MySQL statements stored in Python strings to the DBMS and relays the responses back to Python application

![Image](https://github.com/suchialex/CINS3002-Tutorial/blob/main/tutorial/images/sqlite3.png)

SQLite3 creates a connection to the database and it will obtain a cursor  

<details>
  <summary>
    ðŸ¤“
  </summary>
  Think of this cursor as the file pointer we have seen in the files chapter
</details>


# 14-5. Opening and closing a Database Connection 

## a.
**Step 1:** Import the sqlite3 module  
```python
import sqlite3
```

## b.
**Step 2:** Connect to the database  
Connect to the database named students.db 

```python
conn = sqlite3.connect('students.db')
```
<details>
  <summary>
   ðŸ”Ž Closer Look 
  </summary>
  A database is stored in a file on the system's disk<br> This step establishes a connection between the program and the database file<br>
  If db doesn't exist, it will be created<br>
  It will be an empty db with no tables<br>
</details>

## c.
**Step 3:** Get a cursor for the database  
A cursor is an object that is able to access and manipulate the data in a database.   
      
```python
cur = conn.cursor()
```

## d.
**Step 4:** Perform operations on the db  
Once you have the cursor, you can access and modify the data in the database as needed using the **execute** method 

```python
sql_str = ''   
cur.execute(sql_str)
```

<details>
  <summary>
   ðŸ”Ž Closer Look 
  </summary>
  In the sql_str variable we will store the SQL statement to perform the operations on the database like retrieve data, add data, delete data etc<br>  
  Right now we have left sql_str empty, it will give an error if you execute with empty string 
</details>

## e.
**Step 5:** Commit changes to the database  
When you make changes to the database those changes aren't saved in the database until you commit those changes to the database.  

```python
conn.commit()
```

## f.
**Step 6:** Close the connection to the database  
When you are finished using the database you should close the connection  

```python
conn.close()
```


# 14-6. Creating and Deleting Tables

## a. Creating a table
To create a table in a database, we use SQL statement **CREATE TABLE**  

**Syntax:**  
`CREATE TABLE <TableName> (<ColumnName1> <DataType1>, <ColumnName2> <DataType2>,<ColumnName3> <DataType3>, etc..)`  

For example, if you want to create a table `student` with four columns, this is how you can do it  

```mysql
/* SQL Syntax */
CREATE TABLE student (
  Name TEXT, 
  Major TEXT, 
  Phone TEXT, 
  gpa REAL)
```

<details>
  <summary>
    ðŸ’¡ Note:
  </summary>
  All the words in uppercase are SQL keywords<br>
  SQL is case-insensitive, but it is best practice to use upper case<br>
</details>


<details>
  <summary>
    ðŸ”Ž Closer Look:
  </summary>
  The above statement will create a table with four columns<br>
  Name which is a string<br>
  Major which is a string<br>
  Phone which is a string<br>
  gpa which is a real number (or float as we call in Python)<br>
</details>


## b. Defining Primary Key      
You can also define a column named `cwid` as the primary key as shown below
```mysql
/* SQL Syntax */

CREATE TABLE student (
Name TEXT, 
Major TEXT, 
Phone TEXT,
gpa REAL,
cwid TEXT PRIMARY KEY)
```

When you define a primary key, it is a good practice to use the **NOT NULL** constraint.  
It specifies that the cwid column cannot be empty

```mysql
/* SQL Syntax */

CREATE TABLE student (
Name TEXT, 
Major TEXT, 
Phone TEXT,
gpa REAL,
cwid TEXT PRIMARY KEY NOT NULL)
```

## c. Auto-Incrementing Primary Key

If you do not want to enter the cwid but rather want the database to automatically increment it each time a new student is added, then you have to change its datatype to INTEGER

```mysql
/* SQL Syntax */

CREATE TABLE student (
Name TEXT, 
Major TEXT, 
Phone TEXT,
gpa REAL,
cwid INTEGER PRIMARY KEY NOT NULL)
```

## d. Creating Table Using IF NOT EXISTS
An error will occur if you try to create a table that already exists.  
To prevent the error, you can use the keywords IF NOT EXISTS  
```mysql
/* SQL Syntax */

CREATE TABLE IF NOT EXISTS student (
Name TEXT, 
Major TEXT, 
Phone TEXT,
gpa REAL,
cwid INTEGER PRIMARY KEY NOT NULL)
```

## e. Putting it in Python

To execute our statement above in Python, we must pass it as a string as shown below:

```python
sql_str = '''
CREATE TABLE IF NOT EXISTS 
student (
Name TEXT, 
Major TEXT, 
Phone TEXT, 
gpa REAL, 
cwid INTEGER PRIMARY KEY NOT NULL)
'''

cur.execute(sql_str)
```

## f. Deleting a table
To delete an existing table we use the keyword **DROP TABLE**  

**Syntax:**  
`DROP TABLE <TableName>`

To delete the student table, the SQL statement would be:
```mysql
/* SQL Syntax */

DROP TABLE student
```

## g. Deleting a table using IF EXISTS
  
The above statement will give an error if the table doesn't exist, so to prevent the error, we use **IF EXISTS**  

```mysql
/* SQL Syntax */

DROP TABLE IF EXISTS <TableName>
```

## 6h. Putting it in Python
To delete a table named student without raising an exception

```python
sql = '''DROP TABLE IF EXISTS student'''
cur.execute(sql)
```

# 14-7. Adding Data to Tables

Once you have created a database file and created one or more tables, you can add rows to the table(s)

## a. Adding ONE row:
You can add a row using the **INSERT** statement.

**Syntax**:
`INSERT INTO TableName (ColumnName1, ColumnName2, etc...) VALUES (Value1, Value2, etc...)`

To insert a student row:  
```mysql
/* SQL Syntax */

INSERT INTO student 
(Name, CWID, major, phone, gpa) 
VALUES 
("John Smith", "100100", "HIST", "3182331111", 3.45)
```

<details>
  <summary>
    ðŸ”Ž Closer Look:
  </summary>
  The column names do not have to be in the order they are designed<br>
They will be assigned values in the corresponding order they are specified<br>
If we had not provided values for any columns, they will be NULL at this moment<br>
According to our design, any field other than cwid can be empty<br>
We have not eclosed 3.45 in double quotes because we have defined it as REAL when we designed the table, so SQL is expecting a numeric data not a string
</details>


## b. Putting it in Python
The Python statement will be:  
```python
sql_stmt = '''
INSERT INTO student 
(Name, CWID, gpa) 
VALUES 
("John Smith", "100100", 3.45)
'''
cur.execute(sql_stmt)
```

<details>
  <summary>
    ðŸ‘‰ Try this
  </summary>
  Write a Python statement to insert another row of data, use your own values
</details>


<details>
  <summary>
    ðŸ‘€ Answer
  </summary>

  ```python
  sql = ''' INSERT INTO student 
  (Name, major, phone, gpa, cwid) 
  VALUES 
  ("Mia Rose", "ACCT", "3180944343", 2.78, "100238")'''
  cur.execute(sql)
  ```
</details>

## c. Inserting multiple rows
We can add multiple rows in the same INSERT statement as follows: 
```python
sql_stmt = '''
INSERT INTO student (Name, gpa) 
VALUES 
("Jane Coyle", 3.45), 
("Peter Jones", 2.78),
("Mary Ruth", 3.45)
'''
cur.execute(sql_stmt)
```

<details>
  <summary>
    ðŸ’¡ Note:
  </summary>
  
  - We are not entering CWID, but Python will autoincrement
  - We are not entering other values for anyone here
  - Maybe we don't know the values at this point
  - So they are all going to be NULL
</details>

<details>
  <summary>
    ðŸ‘‰ Try this
  </summary>
  Write a Python statement to insert two rows of data, use your own values using one insert statement
</details>


<details>
  <summary>
    ðŸ‘€ Answer
  </summary>

  ```python
  sql = ''' INSERT INTO student 
  (Name, major, phone, gpa)
  VALUES
  ("Millie Brown", "COSC", "3184541346", 3.2),
  ("Dean Wells", "CINS", "3188753876", 3.87)'''
  cur.execute(sql)
  ```
</details>

## d. Inserting NULL data
What if we know some major values  
How can we insert rows all in one INSERT statment with some having major and some not?  
We use the `NULL` keyword  

```python
sql_stmt = '''
INSERT INTO student 
(Name, Major, Phone) 
VALUES 
("Bethany Rhodes", NULL, "3183235678"), 
("Savannah Reese", "HIST", NULL), 
("Gabriel Webb", NULL, NULL)
'''

cur.execute(sql_stmt)
```

## e. Inserting values of variables
We have inserting strings or numbers so far  
But what if we have to insert variable values?  

### For example:  
```python
name = "Sammy Williams"    
gpa = 3.2
cwid = '100800'

parameter_tuple = (name, cwid, gpa)

sql_stmt = '''
INSERT INTO student 
(Name, CWID, gpa)
VALUES 
(?, ?, ?)
'''

cur.execute(sql_stmt, parameter_tuple)

```

<details>
  <summary>
    ðŸ”Ž Closer Look:
  </summary>
  The VALUES clause has a tuple of question marks instead of values as the first argument<br>
  We are passing another tuple of variables as second argument to the execute method
</details>

<details>
  <summary>
    ðŸš© To Remember:
  </summary>
  This type of SQL statement is called parameterized query
</details>


<details>
  <summary>
    ðŸ‘‰ Try this
  </summary>
  
  Insert the data from this dictionary into the student table  
  `student1 = {"name" : "Jimmy Rattigan",  
  "major" : "ACCT",  
  "gpa" : 2.1}`
  
</details>


<details>
  <summary>
    ðŸ‘€ Answer
  </summary>

  ```python
  name = student1["name"]
  major = student1["major"]
  gpa = student1["gpa"] 
  
  data_tuple = (name, major, gpa)
  
  sql = ''' INSERT INTO student
  (Name, major, gpa)
  VALUES 
  (?,?,?)'''
  cur.execute(sql, data_tuple)
  ```
</details>

# 14-7. Adding Data to Tables

Once you have created a database file and created one or more tables, you can add rows to the table(s)

## a. Adding ONE row:
You can add a row using the **INSERT** statement.

**Syntax**:
`INSERT INTO TableName (ColumnName1, ColumnName2, etc...) VALUES (Value1, Value2, etc...)`

To insert a student row:  
```mysql
/* SQL Syntax */

INSERT INTO student 
(Name, CWID, major, phone, gpa) 
VALUES 
("John Smith", "100100", "HIST", "3182331111", 3.45)
```

<details>
  <summary>
    ðŸ”Ž Closer Look:
  </summary>
  The column names do not have to be in the order they are designed<br>
They will be assigned values in the corresponding order they are specified<br>
If we had not provided values for any columns, they will be NULL at this moment<br>
According to our design, any field other than cwid can be empty<br>
We have not eclosed 3.45 in double quotes because we have defined it as REAL when we designed the table, so SQL is expecting a numeric data not a string
</details>


## b. Putting it in Python
The Python statement will be:  
```python
sql_stmt = '''
INSERT INTO student 
(Name, CWID, gpa) 
VALUES 
("John Smith", "100100", 3.45)
'''
cur.execute(sql_stmt)
```

<details>
  <summary>
    ðŸ‘‰ Try this
  </summary>
  Write a Python statement to insert another row of data, use your own values
</details>


<details>
  <summary>
    ðŸ‘€ Answer
  </summary>

  ```python
  sql = ''' INSERT INTO student 
  (Name, major, phone, gpa, cwid) 
  VALUES 
  ("Mia Rose", "ACCT", "3180944343", 2.78, "100238")'''
  cur.execute(sql)
  ```
</details>

## c. Inserting multiple rows
We can add multiple rows in the same INSERT statement as follows: 
```python
sql_stmt = '''
INSERT INTO student (Name, gpa) 
VALUES 
("Jane Coyle", 3.45), 
("Peter Jones", 2.78),
("Mary Ruth", 3.45)
'''
cur.execute(sql_stmt)
```

<details>
  <summary>
    ðŸ’¡ Note:
  </summary>
  
  - We are not entering CWID, but Python will autoincrement
  - We are not entering other values for anyone here
  - Maybe we don't know the values at this point
  - So they are all going to be NULL
</details>

<details>
  <summary>
    ðŸ‘‰ Try this
  </summary>
  Write a Python statement to insert two rows of data, use your own values using one insert statement
</details>


<details>
  <summary>
    ðŸ‘€ Answer
  </summary>

  ```python
  sql = ''' INSERT INTO student 
  (Name, major, phone, gpa)
  VALUES
  ("Millie Brown", "COSC", "3184541346", 3.2),
  ("Dean Wells", "CINS", "3188753876", 3.87)'''
  cur.execute(sql)
  ```
</details>

## d. Inserting NULL data
What if we know some major values  
How can we insert rows all in one INSERT statment with some having major and some not?  
We use the `NULL` keyword  

```python
sql_stmt = '''
INSERT INTO student 
(Name, Major, Phone) 
VALUES 
("Bethany Rhodes", NULL, "3183235678"), 
("Savannah Reese", "HIST", NULL), 
("Gabriel Webb", NULL, NULL)
'''

cur.execute(sql_stmt)
```

## e. Inserting values of variables
We have inserting strings or numbers so far  
But what if we have to insert variable values?  

### For example:  
```python
name = "Sammy Williams"    
gpa = 3.2
cwid = '100800'

parameter_tuple = (name, cwid, gpa)

sql_stmt = '''
INSERT INTO student 
(Name, CWID, gpa)
VALUES 
(?, ?, ?)
'''

cur.execute(sql_stmt, parameter_tuple)

```

<details>
  <summary>
    ðŸ”Ž Closer Look:
  </summary>
  The VALUES clause has a tuple of question marks instead of values as the first argument<br>
  We are passing another tuple of variables as second argument to the execute method
</details>

<details>
  <summary>
    ðŸš© To Remember:
  </summary>
  This type of SQL statement is called parameterized query
</details>


<details>
  <summary>
    ðŸ‘‰ Try this
  </summary>
  
  Insert the data from this dictionary into the student table  
  `student1 = {"name" : "Jimmy Rattigan",  
  "major" : "ACCT",  
  "gpa" : 2.1}`
  
</details>


<details>
  <summary>
    ðŸ‘€ Answer
  </summary>

  ```python
  name = student1["name"]
  major = student1["major"]
  gpa = student1["gpa"] 
  
  data_tuple = (name, major, gpa)
  
  sql = ''' INSERT INTO student
  (Name, major, gpa)
  VALUES 
  (?,?,?)'''
  cur.execute(sql, data_tuple)
  ```
</details>

# 14-8. Querying Database with Select Statement
Now our table has some data.  
How do we retrieve all or some of the data?

## a. Selecting all columns in a table
We use the SELECT statement in the following general format:  
```mysql
/* SQL Syntax */

SELECT * FROM <TableName>
```

<details>
  <summary>
    ðŸ”Ž Closer Look:
  </summary>
  * selects all the columns and all the rows<br>
  You can specify a certain column or columns if you don't need all the columns
</details>

To get all the data from our student table, we write the following Python statement:

```python
sql_stmt = '''
SELECT * FROM student
'''
cur.execute(sql_stmt)

# We use fetchall method to get values
rows = cur.fetchall()

# Printing the retrieved values
suchi_print(rows) 

```

<details>
  <summary>
    ðŸš© To Remember:
  </summary>
  fetchall method returns a list of tuples
</details>

<details>
  <summary>
    ðŸ‘‰ 14-8a Try this:
  </summary>
  From the above select statement, print data returned bu fetchall in a tabular format, choose alignment and widths to fit the data
</details>


<details>
  <summary>
    ðŸ‘€ Answer:
  </summary>

  ```python
  rows = cur.fetchall()
  for row in rows:
    
    # replace any None values with blank strings
    
    if row[0] is not None:
      name = row[0]
    else:
      name = ''

    if row[1] is not None:
      major = row[1]
    else:
      major = ''

    if row[2] is not None:
      phone = row[2]
    else:
      phone = ''

    if row[3] is not None:
      gpa = row[3]
    else:
      gpa = ''

    cwid = row[4]

    print(f'{cwid: ^6} | {name : <15} | {major : ^6} | {phone : ^12} | {gpa : >6} |')


    
  
  ```

  Another way of doing this using list comprehension

  ```python
  rows = cur.fetchall()
  for row in rows:
    new_row = ['' if data is None else data for data in row] # create a new list to replace all None values with blank strings
    print(f'{new_row[4] : ^4} | {new_row[0] : <15} | {new_row[1] : ^6} | {new_row[2] : ^12} | {new_row[3] : >6} |')
  ```
</details>

## b. Selecting specified columns
To only select the cwid and gpa, we can write the following statement:  
```python
sql = '''SELECT cwid, gpa FROM student'''
cur.execute(sql)
rows = cur.fetchall()
suchi_print(rows)

# Or use for loop
```

<details>
  <summary>
    ðŸ”Ž Closer Look:
  </summary>
  This select statement will retrieve only two columns, but all the rows in the table
</details>

## c. Selecting using WHERE clause
If you wanted to retrieve only the rows that fit a specific criteria, you can do that using the **WHERE** keyword.  

### For example
If you wanted to see which students have GPA >= 3.5, the statment would be

```python
sql_stmt = '''SELECT CWID, gpa WHERE gpa >= 3.5'''
cur.execute(sql_stmt)
rows = cur.fetchall()
suchi_print(rows)
```

## d. Parameterized Select Query using WHERE clause 
What if the gpa value is stored in a variable?  
We use parameterized query  

```python
gpa_val = 3.5
data_tuple = (gpa_val, )
sql_stmt = '''SELECT CWID, gpa 
FROM student 
WHERE gpa >= ?'''
cur.execute(sql_stmt, data_tuple)

rows = cur.fetchall()
suchi_print(rows)
```

<details>
  <summary>
    ðŸ’¡ Note:
  </summary>
  In the WHERE clause we can use <br>
  relational operators (<, >, =, ==, !=, >=, <=, <>) or <br>
    logical operators (AND, OR, NOT) or<br>
    LIKE operator
</details>


## e. Sorting the results of SELECT statement
We can use **ORDER BY** to sort the results 
```python
sql_stmt = '''
SELECT cwid, gpa 
FROM student 
ORDER BY cwid ASC'''
cur.execute(sql_stmt)

rows = cur.fetchall()
suchi_print(rows)
```

<details>
  <summary>
    ðŸ’¡ Note:
  </summary>
    The above statement will sort the results by ascending order of CWID<br>
    To sort by descending we use the DESC keyword
</details>
    
## 8f. Aggregate Functions
In SQL, an aggregate function performs a calculation on a set of values from a table and returns a single value.

### For example
If we want to calculate the average GPA of all the students in the student table, we will use AVG function  
```python
sql_stmt = '''SELECT AVG(gpa) FROM student'''
cur.execute(sql_stmt) 
row = cur.fetchone()
suchi_print(row)
```

<details>
  <summary>
    ðŸ”Ž Closer Look:
  </summary>
  We are using fetchone, because we know only one row will be returned
</details>


<details>
  <summary>
    ðŸ’¡ Note:
  </summary>
  Other aggregate functions are SUM, MIN, MAX and COUNT
</details>


# 14-9. Updating and Deleting Existing Rows

## a. Updating row(s)
We use the UPDATE statement in SQL to change the value of an existing row.  
**Syntax:**  
```mysql
UPDATE <TableName> 
SET <ColumnName> = <DataValue> 
WHERE <Criteria>
```

### For example
To change the gpa of a student whose cwid is 100700 (from NULL) to 3.0  
```python
sql_stmt = '''
UPDATE student 
SET gpa = 3.0 
WHERE cwid = "100700" '''
cur.execute(sql_stmt)
```
<details>
  <summary>
    ðŸ‘‰ 14-9a Try this: 
  </summary>
  
  Write the above Update statement using a variable `cwid = 100700`
</details>


<details>
  <summary>
    ðŸ‘€ Answer:
  </summary>

  ```python
  cwid = 100700
  parameter_tuple = (cwid, )
  sql_stmt = '''
  UPDATE student 
  SET gpa = 3.0 
  WHERE cwid = ? '''
  cur.execute(sql_stmt, parameter_tuple)
  ```
</details>


## b. Using rowcount
To get the number of rows that were updated we can use the rowcount attribute  
### For example:
Let's set all the NULL gpa to 0 and see how many rows were affected 

```python
sql = ''' 
UPDATE student 
SET gpa = 0 
WHERE gpa IS NULL '''
cur.execute(sql)
print(cur.rowcount)
```

<details>
  <summary>
    ðŸ‘‰ 14-9b Try this: 
  </summary>

  Write the above update statement and if no rows are affected, print `Nothing was updated`
</details>


<details>
  <summary>
    ðŸ‘€ Answer:
  </summary>

```python
sql = '''UPDATE student 
SET gpa = 0 
WHERE gpa IS NULL'''
cur.execute(sql)
if cur.rowcount == 0:
  print("Nothing was updated")
  ```
</details>


## c. Deleting row(s)
We use the **DELETE** keyword to delete row(s) from a table  

**Syntax:**  
```mysql
DELETE FROM TableName WHERE Criteria
```
### For example:
To delete all the rows with gpa 0 

```python
sql = '''DELETE FROM student 
WHERE gpa = 0 '''
cur.execute(sql)  
print(cur.rowcount)
```


<details>
<summary>
  ðŸ‘‰ 14-9c Try this:
</summary>

  Write the above statement using the variable `gpa = 0`
</details>


<details>
<summary>
  ðŸ‘€ Answer:
</summary>

  ```python
  gpa = 0
  parameter_tuple = (gpa, )
  sql = '''DELETE FROM student 
  WHERE gpa = ? '''
  cur.execute(sql, parameter_tuple)  
  print(cur.rowcount)
  ```
</details>



<details>
  <summary>
    ðŸ’¡ Take Away:
  </summary>
  
  We have learned the CRUD operations in database programming using Python  
  
  C - Create db or table or rows/columns  
  R - Retrieve data from table  
  U - Update data in the table  
  D - Delete data from table/delete table
</details>



